name: Check Setup Status

on:
  workflow_dispatch:
  schedule:
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 12:00 UTC
    - cron: '0 12 * * *'

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - name: Check GitHub Secrets Setup
        # Note: Context access warnings are expected when secrets are not yet configured
        env:
          HOST: ${{ secrets.HOST }}
          USERNAME: ${{ secrets.USERNAME }}
          PRIVATE_KEY: ${{ secrets.PRIVATE_KEY }}
          PORT: ${{ secrets.PORT }}
        run: |
          echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub Secrets –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è..."
          echo ""
          
          SETUP_COMPLETE=true
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º HOST
          if [ -n "$HOST" ]; then
            echo "‚úÖ HOST: –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
          else
            echo "‚ùå HOST: –ù–ï –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
            SETUP_COMPLETE=false
          fi
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º USERNAME
          if [ -n "$USERNAME" ]; then
            echo "‚úÖ USERNAME: –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
          else
            echo "‚ùå USERNAME: –ù–ï –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
            SETUP_COMPLETE=false
          fi
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º PRIVATE_KEY
          if [ -n "$PRIVATE_KEY" ]; then
            echo "‚úÖ PRIVATE_KEY: –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
          else
            echo "‚ùå PRIVATE_KEY: –ù–ï –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
            SETUP_COMPLETE=false
          fi
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º PORT (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
          if [ -n "$PORT" ]; then
            echo "‚úÖ PORT: –Ω–∞—Å—Ç—Ä–æ–µ–Ω ($PORT)"
          else
            echo "‚ÑπÔ∏è PORT: –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ø–æ—Ä—Ç 22)"
          fi
          
          echo ""
          
          if [ "$SETUP_COMPLETE" = true ]; then
            echo "üéâ –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã! –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ."
            echo ""
            echo "üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
            echo "1. –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ main.yml"
            echo "2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é 'Test SSH Connection'"
            echo "3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ"
          else
            echo "‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
            echo ""
            echo "üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:"
            echo "1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://github.com/${{ github.repository }}/settings/secrets/actions"
            echo "2. –î–æ–±–∞–≤—å—Ç–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã"
            echo "3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ SETUP_SECRETS_STEP_BY_STEP.md"
            echo ""
            echo "‚ùå –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤"
          fi
          
          echo ""
          echo "üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:"
          echo "- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤: https://github.com/${{ github.repository }}/settings/secrets/actions"
          echo "- –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: SETUP_SECRETS_STEP_BY_STEP.md"
          echo "- –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ: GITHUB_SECRETS_SETUP.md"

      - name: Repository Info
        run: |
          echo ""
          echo "üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:"
          echo "- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: ${{ github.repository }}"
          echo "- –í–µ—Ç–∫–∞: ${{ github.ref_name }}"
          echo "- –ö–æ–º–º–∏—Ç: ${{ github.sha }}"
          echo "- –ê–∫—Ç–æ—Ä: ${{ github.actor }}"
          echo "- –í—Ä–µ–º—è: $(date)"
