name: Debug Secrets Configuration

on:
  workflow_dispatch:

jobs:
  debug:
    runs-on: ubuntu-latest
    steps:
      - name: Check secrets availability
        # Note: Context access warnings are expected when secrets are not yet configured
        env:
          HOST: ${{ secrets.HOST }}
          USERNAME: ${{ secrets.USERNAME }}
          PRIVATE_KEY: ${{ secrets.PRIVATE_KEY }}
          PORT: ${{ secrets.PORT }}
        run: |
          echo "üîç Checking GitHub Secrets configuration..."
          echo ""
          
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ (–±–µ–∑ –≤—ã–≤–æ–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–π)
          if [ -n "$HOST" ]; then
            echo "‚úÖ HOST secret is configured"
          else
            echo "‚ùå HOST secret is NOT configured"
          fi
          
          if [ -n "$USERNAME" ]; then
            echo "‚úÖ USERNAME secret is configured"
          else
            echo "‚ùå USERNAME secret is NOT configured"
          fi
          
          if [ -n "$PRIVATE_KEY" ]; then
            echo "‚úÖ PRIVATE_KEY secret is configured"
          else
            echo "‚ùå PRIVATE_KEY secret is NOT configured"
          fi
          
          if [ -n "$PORT" ]; then
            echo "‚úÖ PORT secret is configured (value: $PORT)"
          else
            echo "‚ÑπÔ∏è PORT secret is not configured (will use default: 22)"
          fi
          
          echo ""
          echo "üìã Required secrets for deployment:"
          echo "   1. HOST - Your server IP address or domain"
          echo "   2. USERNAME - SSH username for server access"
          echo "   3. PRIVATE_KEY - SSH private key content"
          echo "   4. PORT - SSH port (optional, defaults to 22)"
          echo ""
          echo "üîß To configure secrets:"
          echo "   1. Go to repository Settings"
          echo "   2. Navigate to Secrets and variables ‚Üí Actions"
          echo "   3. Click 'New repository secret'"
          echo "   4. Add each required secret"
          echo ""
          echo "üìñ For detailed instructions, see GITHUB_SECRETS_SETUP.md"

      - name: Test environment variables
        run: |
          echo "üß™ Testing environment variables..."
          echo "Repository: ${{ github.repository }}"
          echo "Branch: ${{ github.ref_name }}"
          echo "Actor: ${{ github.actor }}"
          echo "Workflow: ${{ github.workflow }}"
