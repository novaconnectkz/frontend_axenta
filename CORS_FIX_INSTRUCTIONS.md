# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ CORS –æ—à–∏–±–∫–∏ - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ CORS –æ—à–∏–±–∫–∞:

```
Access to XMLHttpRequest at 'https://axenta.cloud/api/cms/accounts/' from origin 'http://localhost:3003' 
has been blocked by CORS policy: Request header field x-tenant-id is not allowed by 
Access-Control-Allow-Headers in preflight response.
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–°–æ–∑–¥–∞–Ω **–ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ –±—ç–∫–µ–Ω–¥** –¥–ª—è –æ–±—Ö–æ–¥–∞ CORS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.

### üîÑ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è:

```
–§—Ä–æ–Ω—Ç–µ–Ω–¥ (localhost:3003) 
    ‚Üì 
–ù–∞—à –±—ç–∫–µ–Ω–¥ (localhost:8080/api/auth/accounts) 
    ‚Üì 
Axenta Cloud API (https://axenta.cloud/api/cms/accounts/)
```

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

### 1. **–ë—ç–∫–µ–Ω–¥ –ø—Ä–æ–∫—Å–∏** - `handlers/accounts.go`
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `GetAccounts()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `GetAccount()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥** - `services/accountsService.ts`
- –ò–∑–º–µ–Ω–µ–Ω `baseURL` —Å `https://axenta.cloud/api` –Ω–∞ `config.apiBaseUrl`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—É—Ç–∏ —Å `/cms/accounts/` –Ω–∞ `/auth/accounts/`
- –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### 3. **–ú–∞—Ä—à—Ä—É—Ç—ã –≤ main.go**
```go
// –£—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ (–ø—Ä–æ–∫—Å–∏ –∫ Axenta API)
accountsHandler := handlers.NewAccountsHandler()
apiGroup.GET("/accounts", accountsHandler.GetAccounts)
apiGroup.GET("/accounts/", accountsHandler.GetAccounts)
apiGroup.GET("/accounts/:id", accountsHandler.GetAccount)
apiGroup.GET("/accounts/:id/", accountsHandler.GetAccount)
```

## üöÄ –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

### 1. –ó–∞–ø—É—Å–∫ –±—ç–∫–µ–Ω–¥–∞:
```bash
cd /Users/com/backend_axenta
go run main.go
```

### 2. –ó–∞–ø—É—Å–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:
```bash
cd /Users/com/frontend_axenta
npm run dev
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```javascript
localStorage.setItem('axenta_token', '5e515a8f2874fc78f31c74af45260333f2c84c35');
```

### 4. –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É:
- URL: `http://localhost:3003/accounts`
- –ò–ª–∏ —á–µ—Ä–µ–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é: "–£—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏"

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:

‚úÖ **CORS –æ—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞**  
‚úÖ **–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ**  
‚úÖ **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥**  
‚úÖ **–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è 332 —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏**  

## üîç –õ–æ–≥–∏ —É—Å–ø–µ—à–Ω–æ–π —Ä–∞–±–æ—Ç—ã:

```
üîÑ Proxy request to Axenta API: https://axenta.cloud/api/cms/accounts/?ordering=name&page=1&per_page=50
üìã Headers: Authorization=Token 5e515a8f2874fc..., X-Tenant-ID=186
‚úÖ Axenta API response: status=200, size=23817 bytes
‚úÖ Successfully proxied accounts: count=332, results=50
[GIN] 2025/10/11 - 10:26:48 | 200 | 314.361708ms | ::1 | GET "/api/auth/accounts/?page=1&per_page=50&ordering=name"
```

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø—Ä–æ–∫—Å–∏ —Ä–µ—à–µ–Ω–∏—è:
1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —Ç–æ–∫–µ–Ω—ã –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ –±—Ä–∞—É–∑–µ—Ä
2. **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤–∞–ª–∏–¥–∞—Ü–∏—é
3. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ –≤—Å–µ–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏
4. **–ö–æ–Ω—Ç—Ä–æ–ª—å** - –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∏ –æ—Ç–≤–µ—Ç–∞–º–∏

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
- **401 Unauthorized** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ª–æ–≥–∏–Ω
- **Network errors** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—Ç –ø–æ–Ω—è—Ç–Ω—ã—Ö –æ—à–∏–±–æ–∫
- **Timeout** - 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–ø—Ä–æ—Å

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `per_page` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ  
- `ordering` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- `search` - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- `type` - —Ç–∏–ø –∞–∫–∫–∞—É–Ω—Ç–∞ (client/partner)
- `is_active` - —Å—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. ‚úÖ **CORS –∏—Å–ø—Ä–∞–≤–ª–µ–Ω** - –ø—Ä–æ–∫—Å–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. ‚úÖ **–î–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è** - —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞
3. ‚úÖ **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
4. üîÑ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é** - –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏

–¢–µ–ø–µ—Ä—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ "–£—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏" –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞! üéâ
