# Реализация Drag & Drop для виджетов дашборда

## Что было реализовано

### ✅ 1. Установка библиотеки
- Установлена `vue-draggable-plus` - современная библиотека для Vue 3 с высоким рейтингом доверия

### ✅ 2. Обновление Store (dashboard.ts)
Добавлены новые методы:
- `updateWidgetOrder()` - обновление порядка виджетов
- `saveWidgetPositions()` - сохранение позиций в localStorage
- `loadWidgetPositions()` - загрузка сохраненных позиций
- Автоматическая загрузка позиций при инициализации

### ✅ 3. Обновление компонента DashboardGrid.vue
- Добавлен режим перетаскивания с переключателем
- Интеграция VueDraggable компонента
- Два режима отображения:
  - **Обычный режим**: стандартная сетка виджетов
  - **Режим перетаскивания**: drag & drop интерфейс с визуальными подсказками

### ✅ 4. Пользовательский интерфейс
- Кнопка "Переставить виджеты" для входа в режим drag & drop
- Визуальные индикаторы перетаскивания (drag handle, ghost элементы)
- Информационные подсказки
- Кнопка "Сбросить порядок" для возврата к исходному состоянию
- **НОВОЕ**: Перетаскивание быстрых действий - отдельная кнопка "Изменить порядок" в блоке быстрых действий
- **НОВОЕ**: Перемещение блока быстрых действий - кнопка для перемещения блока вверх или вниз относительно виджетов

### ✅ 5. Адаптивный дизайн
- Оптимизация для мобильных устройств
- Адаптивная сетка для разных размеров экранов
- Специальные стили для drag & drop режима

## Как использовать

### Перетаскивание виджетов:
1. **Откройте дашборд** - перейдите на главную страницу
2. **Нажмите "Переставить виджеты"** - активируется режим drag & drop
3. **Перетащите виджеты** - используйте drag handle (иконка с полосками) для перемещения
4. **Завершите перестановку** - нажмите "Завершить перестановку"
5. **Позиции сохранятся автоматически** - при следующем посещении порядок будет восстановлен

### Перетаскивание быстрых действий:
1. **Войдите в режим перестановки виджетов** - нажмите "Переставить виджеты"
2. **Нажмите "Изменить порядок"** в блоке быстрых действий
3. **Перетащите кнопки** - используйте drag handle слева от каждой кнопки
4. **Нажмите "Готово"** - завершите изменение порядка
5. **Порядок сохранится** - быстрые действия будут отображаться в новом порядке

### Перемещение блока быстрых действий:
1. **Войдите в режим перестановки виджетов** - нажмите "Переставить виджеты"
2. **Используйте кнопку позиционирования** - "Быстрые действия вверх" или "Быстрые действия вниз"
3. **Блок переместится** - будет показан над виджетами или под ними
4. **Позиция сохранится автоматически** - при следующем посещении блок будет в выбранном месте

## Технические детали

### Сохранение позиций
- **Виджеты**: позиции сохраняются в `localStorage` с ключом `dashboard-positions-{layoutId}`
- **Быстрые действия**: порядок сохраняется с ключом `dashboard-quick-actions-order`
- **Позиция блока быстрых действий**: сохраняется с ключом `dashboard-quick-actions-position`
- Автоматическое сохранение при изменении порядка
- Загрузка при инициализации дашборда

### Структура данных
```typescript
interface SavedPosition {
  id: string;
  position: WidgetPosition;
  visible: boolean;
}
```

### Анимации и визуальные эффекты
- Плавные переходы при перетаскивании
- Ghost элементы для предварительного просмотра
- Визуальная обратная связь (hover, active состояния)

## Совместимость
- ✅ Vue 3
- ✅ TypeScript
- ✅ Vuetify 3
- ✅ Мобильные устройства
- ✅ Все современные браузеры

## Безопасность
- Все изменения сохраняются локально в localStorage
- Не нарушает существующую функциональность виджетов
- Возможность сброса к исходному состоянию

## Следующие шаги (опционально)
- [ ] Синхронизация позиций с сервером
- [ ] Возможность создания нескольких пользовательских макетов
- [ ] Drag & drop между разными макетами
- [ ] Изменение размеров виджетов
