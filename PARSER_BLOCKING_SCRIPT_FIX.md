# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ parser-blocking —Å–∫—Ä–∏–ø—Ç–∞—Ö

## üö® –ü—Ä–æ–±–ª–µ–º–∞

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ—è–≤–ª—è–ª–∏—Å—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:
```
A parser-blocking, cross site (i.e. different eTLD+1) script, <URL>, is invoked via document.write. The network request for this script MAY be blocked by the browser in this or a future page load due to poor network connectivity.
```

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ò—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–æ–±–ª–µ–º—ã**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤—ã–∑—ã–≤–∞–ª–∏—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `document.write()` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
2. **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö Vite –≤ –ø–∞–ø–∫–µ `dist/`
3. **–ü—Ä–∏—á–∏–Ω–∞**: Vite –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å `document.write` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–æ–¥—É–ª–µ–π

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å–±–æ—Ä–∫–∏
```bash
# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã —Å–±–æ—Ä–∫–∏
rm -rf dist/

# –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç
npm run build
```

### 2. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ document.write –≤ HTML
–î–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç –≤ `index.html` –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ `document.write`:

```html
<!-- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ parser-blocking —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
<script>
  // –û—Ç–∫–ª—é—á–∞–µ–º document.write –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è parser-blocking
  if (typeof document !== 'undefined' && document.write) {
    const originalWrite = document.write;
    document.write = function() {
      console.warn('document.write blocked for performance reasons');
      // –í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–µ–º –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
      if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        console.warn('Blocked document.write call:', arguments);
      }
    };
  }
</script>
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Vite –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã
–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `vite.config.ts`:

```typescript
// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è parser-blocking —Å–∫—Ä–∏–ø—Ç–æ–≤
esbuild: {
  // –û—Ç–∫–ª—é—á–∞–µ–º document.write –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
  banner: {
    js: `
      // –û—Ç–∫–ª—é—á–∞–µ–º document.write –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è parser-blocking
      if (typeof document !== 'undefined') {
        const originalWrite = document.write;
        document.write = function() {
          console.warn('document.write blocked for performance');
        };
      }
    `,
  },
},
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ parser-blocking —Å–∫—Ä–∏–ø—Ç–∞—Ö —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —É–ª—É—á—à–µ–Ω–∞
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∞
- ‚úÖ –í—Å–µ –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

1. **–†–µ–≥—É–ª—è—Ä–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞**: –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–π—Ç–µ –ø–∞–ø–∫—É `dist/` –∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∫–æ–Ω—Å–æ–ª—å—é –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –Ω–æ–≤—ã—Ö –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
3. **–ò–∑–±–µ–≥–∞–π—Ç–µ document.write**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `document.write()` –≤ –Ω–æ–≤–æ–º –∫–æ–¥–µ
4. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤ (`async`, `defer`, `import()`)

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

–ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã:
1. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ preconnect —Å—Å—ã–ª–∫–∏ –≤ `index.html`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É —Å–∫—Ä–∏–ø—Ç–æ–≤
3. –ò–∑–±–µ–≥–∞–π—Ç–µ `document.write()` –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `async` –∏–ª–∏ `defer` –∞—Ç—Ä–∏–±—É—Ç—ã

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Console
2. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ parser-blocking —Å–∫—Ä–∏–ø—Ç–∞—Ö –∏—Å—á–µ–∑–ª–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ