# üîÑ Retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è API Axenta

## üìã –ü—Ä–æ–±–ª–µ–º–∞ —Å 502 –æ—à–∏–±–∫–∞–º–∏

–û—à–∏–±–∫–∞ `502 Bad Gateway` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–µ—Ä–≤–µ—Ä–∞ Axenta Cloud. –≠—Ç–æ **–Ω–µ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–∞—à–µ–≥–æ –∫–æ–¥–∞**, –∞ –ø—Ä–æ–±–ª–µ–º–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ Axenta.

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. Retry –º–µ—Ö–∞–Ω–∏–∑–º –≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
**–§–∞–π–ª:** `src/context/auth.ts`

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ 502 –æ—à–∏–±–æ–∫:
- **3 –ø–æ–ø—ã—Ç–∫–∏** —Å —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–µ–π—Å—è –∑–∞–¥–µ—Ä–∂–∫–æ–π (2s, 4s, 6s)
- **–£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –ø–æ–≤—Ç–æ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ 502 –æ—à–∏–±–∫–∏
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏

```typescript
// Retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ 502 –æ—à–∏–±–æ–∫
const maxRetries = 3;
for (let attempt = 1; attempt <= maxRetries; attempt++) {
  try {
    // –ü–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  } catch (err) {
    if (err.response?.status === 502 && attempt < maxRetries) {
      // –ñ–¥–µ–º –∏ –ø–æ–≤—Ç–æ—Ä—è–µ–º
      await new Promise(resolve => setTimeout(resolve, 2000 * attempt));
      continue;
    }
    break;
  }
}
```

### 2. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
**–§–∞–π–ª:** `src/utils/axentaApiHelper.ts`

–°–æ–∑–¥–∞–Ω –Ω–∞–±–æ—Ä —É—Ç–∏–ª–∏—Ç –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
- `testAxentaConnection()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å retry
- `testAxentaAuth()` - —Ç–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å retry
- `getAxentaDiagnostics()` - –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã

### 3. –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
**–§–∞–π–ª:** `src/views/AxentaDiagnostics.vue`

–ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
```
http://localhost:3001/axenta-diagnostics
```

## üöÄ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å retry –º–µ—Ö–∞–Ω–∏–∑–º–æ–º (–ù–û–í–ê–Ø!)
```
http://localhost:3001/axenta-diagnostics
```
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å retry
- –ü—Ä–æ–≤–µ—Ä–∫–∞ CORS –∏ SSL
- –¢–µ—Å—Ç API —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 2. –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```
http://localhost:3001/quick-auth-test
```
- –ü—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ —Å –æ—Ç–ª–∞–¥–∫–æ–π
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –¢–µ–ø–µ—Ä—å —Å retry –º–µ—Ö–∞–Ω–∏–∑–º–æ–º

### 3. –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç API
```
http://localhost:3001/axenta-api-test
```
- –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ API
- –¢–∞–±–ª–∏—Ü–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### 4. –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
```
http://localhost:3001/login
```
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –¢–µ–ø–µ—Ä—å —Å retry –º–µ—Ö–∞–Ω–∏–∑–º–æ–º

## üìä –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã:
1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Axenta Cloud** - –±–∞–∑–æ–≤–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
2. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã** - CORS, SSL, –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
3. **API Endpoint** - –ø—Ä–æ–≤–µ—Ä–∫–∞ `/api/auth/login/`

### –†—É—á–Ω—ã–µ —Ç–µ—Å—Ç—ã:
- **–¢–µ—Å—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏** - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å –≤–∞—à–∏–º–∏ —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- ‚úÖ **–£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã** - –∑–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω
- ‚ùå **–ù–µ—É–¥–∞—á–Ω—ã–µ —Ç–µ—Å—Ç—ã** - –∫—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω
- ‚è±Ô∏è **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
- üìã **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** - —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ

## üîß –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

–¢–µ–ø–µ—Ä—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–Ω–æ –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

```
üîÑ –ü–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ 1/3
‚ùå Login error (attempt 1): AxiosError...
‚è≥ –ü–æ–ª—É—á–µ–Ω 502, –æ–∂–∏–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–æ–º...
üîÑ –ü–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ 2/3
‚úÖ Login response: { access: "...", refresh: "..." }
‚úÖ Login successful, user saved: { name: "user@example.com" }
```

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ 502 –æ—à–∏–±–æ–∫:
1. **–ù–µ –ø–∞–Ω–∏–∫—É–π—Ç–µ** - —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å–µ—Ä–≤–µ—Ä–∞ Axenta
2. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ** - retry –º–µ—Ö–∞–Ω–∏–∑–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç –∑–∞–ø—Ä–æ—Å
3. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ** - –µ—Å–ª–∏ –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ—É–¥–∞—á–Ω—ã

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. **–ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞:**
   ```bash
   curl -X POST https://axenta.cloud/api/auth/login/ \
     -H "Content-Type: application/json" \
     -d '{"username":"your_email","password":"your_password"}'
   ```

2. **–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
   ```
   http://localhost:3000
   ```
   (–∏–∑ backend_axenta/scripts)

### –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ CORS
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∫—Å–∏/VPN
4. –°–≤—è–∂–∏—Ç–µ—Å—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Axenta

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API Axenta
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ endpoints
- Retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è 502 –æ—à–∏–±–æ–∫
- –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

### ‚ö†Ô∏è –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- –°–µ—Ä–≤–µ—Ä Axenta –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 502 –æ—à–∏–±–∫–∏
- –≠—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã Axenta, –Ω–µ –Ω–∞—à–µ–≥–æ –∫–æ–¥–∞

### üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
1. –û—Ç–∫—Ä–æ–π—Ç–µ `/axenta-diagnostics` –¥–ª—è –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
2. –ï—Å–ª–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã, –ø–æ–¥–æ–∂–¥–∏—Ç–µ
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –Ω–∞ `/login` –∏–ª–∏ `/quick-auth-test`
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

Retry –º–µ—Ö–∞–Ω–∏–∑–º –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API Axenta! üéâ
